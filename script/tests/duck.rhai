//  パスタスクリプト　AST変換試験データ
//  （EMOの辞書）
//
let h = hasira();

{   // @@@@
    let h = h;
    {   // @@@
        let h = h;
        {   // @@
            let h = h;
            h.condition = cond(has("通常会話"));
            {   // @
                let h = h;
                h.title = "ダックが帰ってくる！";
                h.screenplay = |env| {
                    let a = play(env)
                    let むらさき = actor(a,"むらさき")
                    let えも     = actor(a,"えも")
                    むらさき                      // キャラクタを指定
                        E "興奮笑顔"              // E, Tはカスタムオペレータ
                        T "アヒルやアヒル！"
                        T "11年ぶり、大阪にアヒルが"
                        T "帰ってくるねんで！"
                        ;
                    えも
                        E "冷笑"
                        T "11年ぶりって、"
                        T "君、生まれてたの？"
                        ;
                    action(a);   // アクション（1回のトーク）rustに制御が返る。
                    }
                };
            }
        }
    }
}
// scriptの途中キャンセル方法は？
// 非同期に待機する方法は？スレッド作って待機でOK？
//   ⇒スクリプト側は非同期を意識しない。
//   ⇒アクションコマンドで制御がrustに戻ったのち、rust側で非同期処理する。
//   ⇒スクリプトはあくまで台本であり、どう読むかはrust側の解釈